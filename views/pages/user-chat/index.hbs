<div class="main-container">
    <div class="pd-ltr-20 xs-pd-20-10">
        <div class="min-height-200px">
            <div class="bg-white border-radius-4 box-shadow mb-30">
                <div class="row no-gutters">
                    <div class="col-lg-3 col-md-4 col-sm-12">
                        <div class="chat-list bg-light-gray">
                            <div class="chat-search">
                                <span class="ti-search"></span>
                                <input type="text" placeholder="Search Contact" />
                            </div>
                            <div class="notification-list chat-notification-list">
                                <ul>
                                    {{!-- <li>
                                        <a href="#">
                                            <img src="/vendors/images/img.jpg" alt="" />
                                            <h3 class="clearfix">John Doe</h3>
                                            <p>
                                                <i class="fa fa-circle text-light-orange"></i>
                                                offline
                                            </p>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#">
                                            <img src="/vendors/images/img.jpg" alt="" />
                                            <h3 class="clearfix">John Doe</h3>
                                            <p>
                                                <i class="fa fa-circle text-warning"></i> active 5
                                                min
                                            </p>
                                        </a>
                                    </li>
                                    <li class="active">
                                        <a href="#">
                                            <img src="/vendors/images/img.jpg" alt="" />
                                            <h3 class="clearfix">John Doe</h3>
                                            <p>
                                                <i class="fa fa-circle text-light-green"></i> online
                                            </p>
                                        </a>
                                    </li> --}}
                                    {{#if list}}
                                    {{#each list}}
                                    <li class="{{compareId _id ../user._id}}">
                                        <a href="/user-chat/{{_id}}">
                                            <img src="{{image}}" alt="" />
                                            <h3 class="clearfix">{{name}}</h3>
                                            <p>
                                                <i class="fa fa-circle text-warning"></i> active 5
                                                min
                                            </p>
                                        </a>
                                    </li>
                                    {{/each}}
                                    {{/if}}
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-9 col-md-8 col-sm-12">
                        <div class="chat-detail">
                            <div class="chat-profile-header clearfix">
                                <div class="left">
                                    <div class="clearfix">
                                        <div class="chat-profile-photo">
                                            <img src="{{user.image}}" alt="" />
                                        </div>
                                        <div class="chat-profile-name">
                                            <h3>{{user.name}}</h3>
                                            <span>New York, USA</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="chat-box">
                                <div class="chat-desc customscroll">
                                    <ul>
                                        <li class="clearfix admin_chat">
                                            <span class="chat-img">
                                                <img src="/vendors/images/chat-img2.jpg" alt="" />
                                            </span>
                                            <div class="chat-body clearfix">
                                                <p>Maybe you already have additional info?</p>
                                                <div class="chat_time">09:40PM</div>
                                            </div>
                                        </li>
                                        <li class="clearfix admin_chat">
                                            <span class="chat-img">
                                                <img src="/vendors/images/chat-img2.jpg" alt="" />
                                            </span>
                                            <div class="chat-body clearfix">
                                                <p>
                                                    It is to early to provide some kind of estimation
                                                    here. We need user stories.
                                                </p>
                                                <div class="chat_time">09:40PM</div>
                                            </div>
                                        </li>
                                        <li class="clearfix">
                                            <span class="chat-img">
                                                <img src="/vendors/images/chat-img1.jpg" alt="" />
                                            </span>
                                            <div class="chat-body clearfix">
                                                <p>
                                                    We are just writing up the user stories now so
                                                    will have requirements for you next week. We are
                                                    just writing up the user stories now so will have
                                                    requirements for you next week.
                                                </p>
                                                <div class="chat_time">09:40PM</div>
                                            </div>
                                        </li>
                                        <li class="clearfix">
                                            <span class="chat-img">
                                                <img src="/vendors/images/chat-img1.jpg" alt="" />
                                            </span>
                                            <div class="chat-body clearfix">
                                                <p>
                                                    Essentially the brief is for you guys to build an
                                                    iOS and android app. We will do backend and web
                                                    app. We have a version one mockup of the UI,
                                                    please see it attached. As mentioned before, we
                                                    would simply hand you all the assets for the UI
                                                    and you guys code. If you have any early questions
                                                    please do send them on to myself. Ill be in touch
                                                    in coming days when we have requirements prepared.
                                                    Essentially the brief is for you guys to build an
                                                    iOS and android app. We will do backend and web
                                                    app. We have a version one mockup of the UI,
                                                    please see it attached. As mentioned before, we
                                                    would simply hand you all the assets for the UI
                                                    and you guys code. If you have any early questions
                                                    please do send them on to myself. Ill be in touch
                                                    in coming days when we have.
                                                </p>
                                                <div class="chat_time">09:40PM</div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                <form id="messageForm">
                                    <div class="chat-footer">
                                        <div class="file-upload">
                                            <a href="#"><i class="fa fa-paperclip"></i></a>
                                        </div>
                                        <div class="chat_text_area">
                                            <textarea placeholder="Type your messageâ€¦" id="messageInput"></textarea>
                                        </div>
                                        <div class="chat_send">
                                            <button class="btn btn-link" type="submit">
                                                <i class="icon-copy ion-paper-airplane"></i>
                                            </button>
                                        </div>
                                    </div>

                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
<script>
    var socket = io();
    var messages = document.getElementById('customscroll');
    var form = document.getElementById('messageForm');
    var input = document.getElementById('messageInput');

    form.addEventListener('submit', function (e) {
        e.preventDefault();
        if (input.value) {
            socket.emit('chat message', input.value);
            input.value = '';
        }
    });

    socket.on('chat message', function (msg) {
        console.log("ðŸš€ ~ msg:", msg)
        var item = document.createElement('li');
        item.textContent = msg;
        console.log("ðŸš€ ~ item:", item)
        window.scrollTo(0, document.body.scrollHeight);
    });
</script>